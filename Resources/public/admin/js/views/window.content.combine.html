<div ng-controller="CombineController">
    <window-frame>
        <window-toolbar>
            <button-group>
                <button pressed="controller.currentView == 1" ng-click="controller.currentView = 1" icon="#icon-list-9" title="List"></button>
                <button pressed="controller.currentView == 2" ng-click="controller.currentView = 2" icon="#icon-layout" title="Form"></button>
            </button-group>

            <button-group float="right">
                <jarves-field ng-if="controller.classProperties.domainDepended" type="domains" model="controller.domain"></jarves-field>
                <jarves-field ng-show="controller.classProperties.multiLanguage" type="language" model="controller.language"></jarves-field>
                <jarves-field type="text" model="controller.searchQuery" width="120px" ></jarves-field>
            </button-group>

        </window-toolbar>

        <window-content>
            <div ng-if="!controller.classProperties">
                Loading ...
            </div>
            <div ng-if="controller.classProperties">
                <div ng-show="controller.currentView == 2">
                    <jarves-list onselect="controller.select(pk)" entry-point="controller.getEntryPoint()"></jarves-list>
                    <jarves-form name="editForm" ng-if="controller.editView == 1 && controller.selected" pk="controller.selected" entry-point="controller.getEditEntryPoint()"></jarves-form>
                    <jarves-form name="addForm" ng-if="controller.editView == 2" entry-point="controller.getAddEntryPoint()"></jarves-form>
                </div>
                <div ng-show="controller.currentView == 1">
                    <jarves-grid name="listGrid" entry-point="controller.getEntryPoint()" onselect="controller.select(pk)"></jarves-grid>
                </div>
            </div>
        </window-content>
    </window-frame>

    <window-sidebar label="'Actions'">
        <button ng-if="forms.editForm && controller.editView == 1" ng-click="forms.editForm.save()" icon="#icon-checkmark-6" translate>
            Save
            <span ng-if="controller.formController.hasChanges()">*</span>
        </button>
        <button ng-if="forms.addForm && controller.editView == 2" ng-click="forms.addForm.add()" translate>Save</button>
        <button ng-if="forms.editForm && controller.editView == 1" ng-click="forms.editForm.remove()" icon="{{controller.classProperties.removeIcon}}" translate>Remove</button>
        <button ng-if="forms.editForm && controller.editView == 1" ng-click="forms.editForm.reset()" icon="#icon-escape" translate>Remove</button>
        <window-sidebar-delimiter>d</window-sidebar-delimiter>
        <button ng-click="controller.showAdd()" translate icon="{{controller.classProperties.addIcon}}">New</button>
        <button ng-if="controller.classProperties.nestedRootAdd" icon="{{controller.classProperties.nestedRootAddIcon}}" ng-click="controller.showAdd()" translate>New Domain</button>
    </window-sidebar>
</div>